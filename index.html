<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>vyrtu_songplayer | written in rust, btw</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 1. ADD THE LOADER DIV HERE -->
    <div id="loader"></div>

    <canvas id="glcanvas"></canvas>
    <script src="mq_js_bundle.js"></script>
<script>
window.addEventListener('click', function() {
  if (typeof resume_audio === 'function') {
    resume_audio();
  }

  var ctx = window.audioContext;
  if (ctx && ctx.state === 'suspended') {
    ctx.resume().then(function() {
      console.log("AudioContext state: " + ctx.state);
    });
  }

  console.log("User interaction recorded.");
}, { once: true });

window.addEventListener('load', function() {
  if (typeof load === 'function') {
    load("mediaplayer_web.wasm?v=" + Date.now());
    
    // 2. ADD THIS TO HIDE THE SPINNER AFTER WASM LOADS
    setTimeout(() => {
        document.body.classList.add('loaded');
    }, 1200); 
  } else {
    console.error("Err! Missing Bridge!!! 3: ");
  } 
});
</script>
    </body>
</html>

